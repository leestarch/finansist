import{u as O,r as o,k as Q,o as h,c as k,w as r,P as y,m as B,N as I,a as n,Q as R,v as d,g as x,b,t as w}from"./app-6990ba06.js";import{Q as V}from"./QPage-85c522ef.js";import{_ as q,O as S}from"./OperationTable-17c6273c.js";import"./QTable-adad826a.js";import"./QSelect-39cf87be.js";import"./QPagination-c168384d.js";/* empty css                                                                       */const T={class:"q-pt-md q-pl-md info-text"},A={__name:"CategoryOperations",setup(D){const N=O();o({});const l=o([]),e=o({page:1,rowsPerPage:30,rowsNumber:0}),c=o(0),m=o(0),C=N.params.id,u=async()=>{var i,a,s,_,g,v,f;y.show();try{const t=await B.get("/api/operations/",{params:{page:e.value.page,categoryIds:[C]}});l.value=(i=t==null?void 0:t.data)==null?void 0:i.data,c.value=l.value.reduce((P,p)=>P+(p==null?void 0:p.sber_amountRub),0),m.value=t.data.meta.total,e.value.rowsNumber=(s=(a=t.data)==null?void 0:a.meta)==null?void 0:s.total,e.value.page=(g=(_=t.data)==null?void 0:_.meta)==null?void 0:g.current_page,e.value.totalPages=(f=(v=t.data)==null?void 0:v.meta)==null?void 0:f.last_page}catch(t){console.log(t),I.create({message:"Ошибка получения данных",color:"red",timeout:2e3})}y.hide()};return Q(async()=>{await u()}),(i,a)=>(h(),k(V,null,{default:r(()=>[n(x,null,{default:r(()=>[n(R,{class:"text-h5 text-center"},{default:r(()=>a[1]||(a[1]=[d(" Операции категории ")])),_:1})]),_:1}),b("div",T,[d(" Всего: "+w(m.value)+" ",1),a[2]||(a[2]=b("br",null,null,-1)),d(" Сумма: "+w(c.value),1)]),n(x,null,{default:r(()=>[n(S,{operations:l.value,pagination:e.value,"onUpdate:pagination":a[0]||(a[0]=s=>{e.value=s,u()}),onRefresh:u},null,8,["operations","pagination"])]),_:1})]),_:1}))}},H=q(A,[["__scopeId","data-v-602cb4e7"]]);export{H as default};
