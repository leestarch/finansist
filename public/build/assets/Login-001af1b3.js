import{r as n,o as m,c as p,w as l,a as e,Q as r,b as c,d as f,e as d,f as w,g as x,P as u,h as g}from"./app-6990ba06.js";import{Q as b}from"./QForm-ce3dfc0a.js";import{Q}from"./QPage-85c522ef.js";const h={__name:"Login",setup(V){const t=n({email:"",password:""}),i=async()=>{u.show();try{const a=await axios.post("/api/login",t.value);a.data.success&&(localStorage.setItem("token",a.data.token),localStorage.setItem("user",JSON.stringify(a.data.user)),await g.push("/"))}catch(a){console.log(a.response.data.message)}u.hide()};return(a,s)=>(m(),p(Q,{class:"flex flex-center"},{default:l(()=>[e(x,{class:"q-pa-md",style:{"max-width":"600px","min-width":"400px"}},{default:l(()=>[e(r,null,{default:l(()=>s[2]||(s[2]=[c("div",{class:"text-h6 text-center"},"Вход",-1)])),_:1}),e(r,null,{default:l(()=>[e(b,{onSubmit:f(i,["prevent"])},{default:l(()=>[e(d,{modelValue:t.value.email,"onUpdate:modelValue":s[0]||(s[0]=o=>t.value.email=o),label:"Username",outlined:"",required:"",class:"q-mb-md"},null,8,["modelValue"]),e(d,{modelValue:t.value.password,"onUpdate:modelValue":s[1]||(s[1]=o=>t.value.password=o),label:"Password",type:"password",outlined:"",required:"",class:"q-mb-md"},null,8,["modelValue"]),e(w,{type:"submit",label:"Войти",color:"primary",class:"full-width"})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{h as default};
